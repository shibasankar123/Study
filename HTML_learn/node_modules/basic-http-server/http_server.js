"use strict";

var http = require('http');
var logger = require('./logger');
var HttpRequestHandler = require('./lib/http_request_handler');

class HttpServer {
    constructor(routing) {
        let requestHandler = new HttpRequestHandler(routing);
        this.server = http.createServer((request, response) => {
            requestHandler.handle(request, response);
        });
    }

    start(port) {
        this.server.listen(port, (err) => {
            if (err) {
                logger.fatal(err);
                throw err;
            }

            var message = 'HTTP service started. Listening on port ' + port;
            logger.info(message);
        });
    }
}

module.exports = HttpServer;
