"use strict";
var assert = require('assert');
var Routing = require('./../server/routing');

describe('routing', function() {

    beforeEach(function() {
        this.sut = new Routing();

        this.getPathHandler = function() {};
        this.postPathHandler = function() {};
        this.getHomeHandler = function() {};

        this.sut.registerRouteHandler('/path', 'get', this.getPathHandler);
        this.sut.registerRouteHandler('/path', 'post', this.postPathHandler);
        this.sut.registerRouteHandler('/home', 'get', this.getHomeHandler);
    });

    it('should return the correct handler', function () {
        let handler = this.sut.getRouteHandler('/path', 'post');
        assert.equal(this.postPathHandler, handler);
    });

    it('should return the correct handler even when method case differs', function() {
       let handler = this.sut.getRouteHandler('/path', 'GET');
        assert.equal(this.getPathHandler, handler);
    });

    it('should return null if the url case differs', function() {
        let handler = this.sut.getRouteHandler('/HOME', 'get');
        assert(!handler);
    });
});